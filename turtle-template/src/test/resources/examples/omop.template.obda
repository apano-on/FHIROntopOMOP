[PrefixDeclaration]
:		http://hl7.org/fhir/
owl:		http://www.w3.org/2002/07/owl#
rdf:		http://www.w3.org/1999/02/22-rdf-syntax-ns#
xml:		http://www.w3.org/XML/1998/namespace
xsd:		http://www.w3.org/2001/XMLSchema#
fhir:		http://hl7.org/fhir/
obda:		https://w3id.org/obda/vocabulary#
rdfs:		http://www.w3.org/2000/01/rdf-schema#

[MappingDeclaration] @collection [[
mappingId	mapping1
target	<http://hl7.org/fhir/Patient/{person_id}> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/Patient> . <http://hl7.org/fhir/Patient/{person_id}> <http://hl7.org/fhir/Resource.id> <http://hl7.org/fhir/Patient/{person_id}/Resource.id> . <http://hl7.org/fhir/Patient/{person_id}/Resource.id> <http://hl7.org/fhir/value> "{person_id}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Patient/{person_id}> <http://hl7.org/fhir/Patient.gender> <http://hl7.org/fhir/Patient/{person_id}/Patient.gender> . <http://hl7.org/fhir/Patient/{person_id}/Patient.gender> <http://hl7.org/fhir/value> "{gender}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Patient/{person_id}> <http://hl7.org/fhir/Patient.birthDate> <http://hl7.org/fhir/Patient/{person_id}/Patient.birthDate> .  <http://hl7.org/fhir/Patient/{person_id}> <http://hl7.org/fhir/Patient.birthDate> <http://hl7.org/fhir/Patient/{person_id}/Patient.birthDate> . <http://hl7.org/fhir/Patient/{person_id}/Patient.birthDate> <http://hl7.org/fhir/value> "{birth_date}"^^<http://www.w3.org/2001/XMLSchema#date> . <http://hl7.org/fhir/Patient/{person_id}> <http://hl7.org/fhir/Patient.address> <http://hl7.org/fhir/Location/{location_id}/Location.address> . <http://hl7.org/fhir/Patient/{person_id}> <http://hl7.org/fhir/Patient.generalPractitioner> <http://hl7.org/fhir/Patient/{person_id}/Patient.generalPractitioner> . <http://hl7.org/fhir/Patient/{person_id}/Patient.generalPractitioner> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Practitioner/{provider_id}> . <http://hl7.org/fhir/Patient/{person_id}> <http://hl7.org/fhir/Patient.generalPractitioner> <http://hl7.org/fhir/Patient/{person_id}/Patient.generalPractitioner> . <http://hl7.org/fhir/Patient/{person_id}/Patient.generalPractitioner> <http://hl7.org/fhir/link> <http://hl7.org/fhir/PractitionerRole/{provider_id}> .
source	SELECT person.*, make_date(year_of_birth, month_of_birth, day_of_birth) AS birth_date, 
    LOWER(concept_name) AS gender FROM person, concept 
    WHERE person.gender_concept_id = concept.concept_id  
    AND person_id = {{{patient_id}}}

mappingId	mapping2
target	<http://hl7.org/fhir/Practitioner/{provider_id}> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/Practitioner> . <http://hl7.org/fhir/Practitioner/{provider_id}> <http://hl7.org/fhir/Resource.id> <http://hl7.org/fhir/Practitioner/{provider_id}/Resource.id> . <http://hl7.org/fhir/Practitioner/{provider_id}/Resource.id> <http://hl7.org/fhir/value> "{provider_id}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Practitioner/{provider_id}> <http://hl7.org/fhir/Practitioner.identifier> <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.identifier> . <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.identifier> <http://hl7.org/fhir/value> "{npi}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Practitioner/{provider_id}> <http://hl7.org/fhir/Practitioner.name> <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.name> . <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.name> <http://hl7.org/fhir/value> "{provider_name}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Practitioner/{provider_id}> <http://hl7.org/fhir/Practitioner.birthDate> <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.birthDate> . <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.birthDate> <http://hl7.org/fhir/value> "{birth_date}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Practitioner/{provider_id}> <http://hl7.org/fhir/Practitioner.qualification> <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.qualification> . <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.qualification> <http://hl7.org/fhir/Practitioner.qualification.identifier> <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.qualification/Practitioner.qualification.identifier> . <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.qualification/Practitioner.qualification.identifier> <http://hl7.org/fhir/Identifier.value> <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.qualification/Practitioner.qualification.identifier/Identifier.value> . <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.qualification/Practitioner.qualification.identifier/Identifier.value> <http://hl7.org/fhir/value> "{dea}"^^<http://www.w3.org/2001/XMLSchema#string> .
source	SELECT *, make_date(year_of_birth, 1, 1) AS birth_date FROM provider

mappingId	mapping3
target	<http://hl7.org/fhir/Practitioner/{provider_id}> <http://hl7.org/fhir/Practitioner.gender> <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.gender> . <http://hl7.org/fhir/Practitioner/{provider_id}/Practitioner.gender> <http://hl7.org/fhir/value> "{gender}"^^<http://www.w3.org/2001/XMLSchema#string> .
source	SELECT provider.*, LOWER(concept_name) AS gender FROM provider, concept 
    WHERE provider.gender_concept_id = concept.concept_id

mappingId	mapping7
target	<http://hl7.org/fhir/Encounter/{visit_occurrence_id}> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/Encounter> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> <http://hl7.org/fhir/Resource.id> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Resource.id> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Resource.id> <http://hl7.org/fhir/value> "{visit_occurrence_id}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> <http://hl7.org/fhir/Encounter.status> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.status> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.status> <http://hl7.org/fhir/value> "finished"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> <http://hl7.org/fhir/Encounter.type> <http://hl7.org/fhir/CodeableConcept/{visit_concept_id}> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> <http://hl7.org/fhir/Encounter.class> <http://hl7.org/fhir/CodeableConcept/{visit_type_concept_id}> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> <http://hl7.org/fhir/Encounter.subject> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.subject> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.subject> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Patient/{person_id}> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> <http://hl7.org/fhir/Encounter.period> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.period> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.period> <http://hl7.org/fhir/Period.start> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.period/Period.start> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.period/Period.start> <http://hl7.org/fhir/value> "{visit_start_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.period> <http://hl7.org/fhir/Period.end> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.period/Period.end> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.period/Period.end> <http://hl7.org/fhir/value> "{visit_end_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> <http://hl7.org/fhir/Encounter.performer> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.performer> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.performer> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Practitioner/{provider_id}> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> <http://hl7.org/fhir/Encounter.partOf> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.partOf> . <http://hl7.org/fhir/Encounter/{visit_occurrence_id}/Encounter.partOf> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Encounter/{preceding_visit_occurrence_id}> .
source	SELECT * FROM visit_occurrence WHERE person_id = {{{patient_id}}}

mappingId	mapping8
target	<http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/Condition> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://hl7.org/fhir/Resource.id> <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Resource.id> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Resource.id> <http://hl7.org/fhir/value> "{condition_occurrence_id}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://hl7.org/fhir/Condition.code> <http://hl7.org/fhir/CodeableConcept/{condition_concept_id}> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://hl7.org/fhir/Condition.category> <http://hl7.org/fhir/CodeableConcept/{condition_type_concept_id}> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://hl7.org/fhir/Condition.subject> <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.subject> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.subject> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Patient/{person_id}> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://hl7.org/fhir/Condition.encounter> <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.encounter> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.encounter> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://hl7.org/fhir/Condition.onsetDateTime> <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.onsetDateTime> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.onsetDateTime> <http://hl7.org/fhir/value> "{condition_start_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://hl7.org/fhir/Condition.abatementDateTime> <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.abatementDateTime> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.abatementDateTime> <http://hl7.org/fhir/value> "{condition_end_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://hl7.org/fhir/Condition.asserter> <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.asserter> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.asserter> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Practitioner/{provider_id}> .
source	SELECT * FROM condition_occurrence WHERE person_id = {{{patient_id}}}

mappingId	mapping9
target	<http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/Condition> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}> <http://hl7.org/fhir/Condition.clinicalStatus> <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.clinicalStatus> . <http://hl7.org/fhir/Condition/{condition_occurrence_id}/Condition.clinicalStatus> <http://hl7.org/fhir/value> "{clinicalStatus}"^^<http://www.w3.org/2001/XMLSchema#string> .
source	SELECT condition_occurrence.*, LOWER(concept_name) AS clinicalStatus FROM condition_occurrence, concept 
        WHERE condition_occurrence.condition_status_concept_id = concept.concept_id AND person_id = {{{patient_id}}}

mappingId	mapping10
target	<http://hl7.org/fhir/Procedure/{procedure_occurrence_id}> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/Procedure> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}> <http://hl7.org/fhir/Resource.id> <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Resource.id> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Resource.id> <http://hl7.org/fhir/value> "{procedure_occurrence_id}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}> <http://hl7.org/fhir/Procedure.code> <http://hl7.org/fhir/CodeableConcept/{procedure_concept_id}> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}> <http://hl7.org/fhir/Procedure.category> <http://hl7.org/fhir/CodeableConcept/{procedure_type_concept_id}> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}> <http://hl7.org/fhir/Procedure.subject> <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Procedure.subject> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Procedure.subject> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Patient/{person_id}> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}> <http://hl7.org/fhir/Procedure.encounter> <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Procedure.encounter> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Procedure.encounter> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}> <http://hl7.org/fhir/Procedure.performedDateTime> <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Procedure.performedDateTime> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Procedure.performedDateTime> <http://hl7.org/fhir/value> "{procedure_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}> <http://hl7.org/fhir/Procedure.performer> <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Procedure.performer> . <http://hl7.org/fhir/Procedure/{procedure_occurrence_id}/Procedure.performer> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Practitioner/{provider_id}> .
source	SELECT * FROM procedure_occurrence WHERE person_id = {{{patient_id}}}

mappingId	mapping11
target	<http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/MedicationStatement> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://hl7.org/fhir/Resource.id> <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/Resource.id> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/Resource.id> <http://hl7.org/fhir/value> "{drug_exposure_id}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://hl7.org/fhir/MedicationStatement.status> <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.status> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.status> <http://hl7.org/fhir/value> "completed"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://hl7.org/fhir/MedicationStatement.statusReason> <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.statusReason> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.statusReason> <http://hl7.org/fhir/value> "{stop_reason}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://hl7.org/fhir/MedicationStatement.medicationCodeableConcept> <http://hl7.org/fhir/CodeableConcept/{drug_concept_id}> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://hl7.org/fhir/MedicationStatement.category> <http://hl7.org/fhir/CodeableConcept/{drug_type_concept_id}> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://hl7.org/fhir/MedicationStatement.subject> <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.subject> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.subject> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Patient/{person_id}> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://hl7.org/fhir/MedicationStatement.context> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://hl7.org/fhir/MedicationStatement.effectiveDateTime> <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.effectiveDateTime> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.effectiveDateTime> <http://hl7.org/fhir/value> "{drug_exposure_start_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}> <http://hl7.org/fhir/MedicationStatement.effectivePeriod> <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.effectivePeriod> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.effectivePeriod> <http://hl7.org/fhir/Period.start> <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.effectivePeriod/Period.start> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.effectivePeriod/Period.start> <http://hl7.org/fhir/value> "{drug_exposure_start_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.effectivePeriod> <http://hl7.org/fhir/Period.end> <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.effectivePeriod/Period.end> . <http://hl7.org/fhir/MedicationStatement/{drug_exposure_id}/MedicationStatement.effectivePeriod/Period.end> <http://hl7.org/fhir/value> "{drug_exposure_end_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> .
source	SELECT * FROM drug_exposure WHERE person_id = {{{patient_id}}}

mappingId	mapping12
target	<http://hl7.org/fhir/Observation/{measurement_id}> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/Observation> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Resource.id> <http://hl7.org/fhir/Observation/{measurement_id}/Resource.id> . <http://hl7.org/fhir/Observation/{measurement_id}/Resource.id> <http://hl7.org/fhir/value> "{measurement_id}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.status> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.status> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.status> <http://hl7.org/fhir/value> "final"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.code> <http://hl7.org/fhir/CodeableConcept/{measurement_concept_id}> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.category> <http://hl7.org/fhir/CodeableConcept/{measurement_type_concept_id}> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.subject> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.subject> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.subject> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Patient/{person_id}> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.encounter> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.encounter> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.encounter> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Encounter/{visit_occurrence_id}> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.effectiveDateTime> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.effectiveDateTime> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.effectiveDateTime> <http://hl7.org/fhir/value> "{measurement_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.effectivePeriod> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.effectivePeriod> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.effectivePeriod> <http://hl7.org/fhir/Period.start> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.effectivePeriod/Period.start> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.effectivePeriod/Period.start> <http://hl7.org/fhir/value> "{measurement_datetime}"^^<http://www.w3.org/2001/XMLSchema#dateTime> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.valueCodeableConcept> <http://hl7.org/fhir/CodeableConcept/{value_as_concept_id}> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.valueString> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.valueString> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.valueString> <http://hl7.org/fhir/value> "{value_as_number}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.referenceRange> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.referenceRange> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.referenceRange> <http://hl7.org/fhir/Observation.referenceRange.low> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.referenceRange/Observation.referenceRange.low> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.referenceRange/Observation.referenceRange.low> <http://hl7.org/fhir/value> "{range_low}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.referenceRange> <http://hl7.org/fhir/Observation.referenceRange.high> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.referenceRange/Observation.referenceRange.high> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.referenceRange/Observation.referenceRange.high> <http://hl7.org/fhir/value> "{range_high}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.performer> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.performer> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.performer> <http://hl7.org/fhir/link> <http://hl7.org/fhir/Practitioner/{provider_id}> .
source	SELECT * FROM measurement WHERE person_id = {{{patient_id}}}

mappingId	mapping13
target	<http://hl7.org/fhir/Observation/{measurement_id}> <http://hl7.org/fhir/Observation.valueQuantity> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.valueQuantity> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.valueQuantity> <http://hl7.org/fhir/Quantity.value> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.valueQuantity/Quantity.value> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.valueQuantity/Quantity.value> <http://hl7.org/fhir/value> "{value_as_number}"^^<http://www.w3.org/2001/XMLSchema#decimal> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.valueQuantity> <http://hl7.org/fhir/Quantity.unit> <http://hl7.org/fhir/Observation/{measurement_id}/Observation.valueQuantity/Quantity.unit> . <http://hl7.org/fhir/Observation/{measurement_id}/Observation.valueQuantity/Quantity.unit> <http://hl7.org/fhir/value> "{measurement_unit}"^^<http://www.w3.org/2001/XMLSchema#string> .
source	SELECT measurement.*, concept_name AS measurement_unit FROM measurement, concept 
                                    WHERE measurement.unit_concept_id = concept.concept_id
                                    AND person_id = {{{patient_id}}}

mappingId	mapping14
target	<http://hl7.org/fhir/CodeableConcept/{concept_id}> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/CodeableConcept> . <http://hl7.org/fhir/CodeableConcept/{concept_id}> <http://hl7.org/fhir/Resource.id> <http://hl7.org/fhir/CodeableConcept/{concept_id}/Resource.id> . <http://hl7.org/fhir/CodeableConcept/{concept_id}/Resource.id> <http://hl7.org/fhir/value> "{concept_id}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/CodeableConcept/{concept_id}> <http://hl7.org/fhir/CodeableConcept.coding> <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding> . <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://hl7.org/fhir/Coding> . <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding> <http://hl7.org/fhir/Coding.code> <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding/Coding.code> . <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding/Coding.code> <http://hl7.org/fhir/value> "{concept_code}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding> <http://hl7.org/fhir/Coding.display> <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding/Coding.display> . <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding/Coding.display> <http://hl7.org/fhir/value> "{concept_name}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding> <http://hl7.org/fhir/Coding.system> <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding/Coding.system> . <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.coding/Coding.system> <http://hl7.org/fhir/value> "{vocabulary_id}"^^<http://www.w3.org/2001/XMLSchema#string> . <http://hl7.org/fhir/CodeableConcept/{concept_id}> <http://hl7.org/fhir/CodeableConcept.text> <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.text> . <http://hl7.org/fhir/CodeableConcept/{concept_id}/CodeableConcept.text> <http://hl7.org/fhir/value> "{concept_name}"^^<http://www.w3.org/2001/XMLSchema#string> .
source	SELECT * FROM concept WHERE concept_id IN 
	(SELECT concept_id FROM 
      (
      -- # provider -> :PractitionerRole
         (SELECT DISTINCT specialty_concept_id AS concept_id
          FROM provider
          WHERE specialty_concept_id IS NOT NULL)
         UNION
      -- # care_site -> :Location   
         (SELECT DISTINCT place_of_service_concept_id AS concept_id
          FROM care_site
          WHERE place_of_service_concept_id IS NOT NULL)
         UNION
      -- # visit_occurrence -> :Encounter   
         (SELECT DISTINCT visit_concept_id AS concept_id
          FROM visit_occurrence
          WHERE visit_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
         UNION
         (SELECT DISTINCT visit_type_concept_id AS concept_id
          FROM visit_occurrence
          WHERE visit_type_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
         UNION
      -- # condition_occurrence -> :Condition   
         (SELECT DISTINCT condition_concept_id AS concept_id
          FROM condition_occurrence
          WHERE condition_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
         UNION
         (SELECT DISTINCT condition_type_concept_id AS concept_id
          FROM condition_occurrence
          WHERE condition_type_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
         UNION
         (SELECT DISTINCT condition_status_concept_id AS concept_id
          FROM condition_occurrence
          WHERE condition_status_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
      --  # procedure_occurrence -> :Procedure    
         UNION
         (SELECT DISTINCT procedure_concept_id AS concept_id
          FROM procedure_occurrence
          WHERE procedure_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
         UNION
         (SELECT DISTINCT procedure_type_concept_id AS concept_id
          FROM procedure_occurrence
          WHERE procedure_type_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
      -- # drug_exposure -> :MedicationStatement
         UNION
         (SELECT DISTINCT drug_concept_id AS concept_id
          FROM drug_exposure
          WHERE drug_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
         UNION
         (SELECT DISTINCT drug_type_concept_id AS concept_id
          FROM drug_exposure
          WHERE drug_type_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})    
      -- # measurement -> :Observation
          UNION
          (SELECT DISTINCT measurement_concept_id AS concept_id
           FROM measurement
           WHERE measurement_concept_id IS NOT NULL
             AND person_id = {{{patient_id}}})
         UNION
         (SELECT DISTINCT measurement_type_concept_id AS concept_id
          FROM measurement
          WHERE measurement_type_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
         UNION
         (SELECT DISTINCT value_as_concept_id AS concept_id
          FROM measurement
          WHERE value_as_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
      -- # measurement.unit_concept_id -> :Observation.valueQuantity    
         UNION
         (SELECT DISTINCT unit_concept_id AS concept_id
          FROM measurement
          WHERE unit_concept_id IS NOT NULL
            AND person_id = {{{patient_id}}})
          )    
      t)                                                  
]]
